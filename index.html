<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Splash Crazy - Jogo da Bolinha Neon</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: Arial, sans-serif;
      background-color: #000;
      color: #0ff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    canvas { background-color: #111; display: block; }
    #menu, #characterMenu {
      position: absolute;
      background: rgba(0, 0, 0, 0.8);
      border: 2px solid #0ff;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      z-index: 10;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      background: #0ff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
    }
    .character-list {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .character {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid #0ff;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    .locked {
      background: #333;
      color: #555;
      border-style: dashed;
    }
    .unlocked {
      background: #0ff;
      color: #000;
    }
    #gameContainer {
      display: none;
      flex-direction: column;
      align-items: center;
    }
  </style>
</head>
<body>
  <div id="menu">
    <h1>Splash Crazy</h1>
    <button id="startBtn">Iniciar Jogo</button>
    <button id="characterBtn">Selecionar Bolinha</button>
  </div>

  <div id="characterMenu" style="display:none;">
    <h2>Escolha sua Bolinha</h2>
    <div class="character-list" id="characterList"></div>
    <button id="backBtn">Voltar</button>
  </div>

  <div id="gameContainer">
    <canvas id="gameCanvas" width="480" height="640"></canvas>
    <div style="margin-top:10px;">
      <span>Pontua√ß√£o: <span id="score">0</span></span> |
      <span>Fase: <span id="level">1</span></span> |
      <span>Vidas: <span id="lives">3</span></span>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    const menu = document.getElementById("menu");
    const characterMenu = document.getElementById("characterMenu");
    const characterList = document.getElementById("characterList");
    const gameContainer = document.getElementById("gameContainer");
    const startBtn = document.getElementById("startBtn");
    const characterBtn = document.getElementById("characterBtn");
    const backBtn = document.getElementById("backBtn");

    const scoreEl = document.getElementById("score");
    const levelEl = document.getElementById("level");
    const livesEl = document.getElementById("lives");

    let paddle = { x: canvas.width / 2 - 40, y: canvas.height - 20, width: 80, height: 10 };
    let ball = { x: canvas.width / 2, y: paddle.y - 10, radius: 8, dx: 0, dy: 0 };
    let bricks = [];
    let score = 0;
    let level = 1;
    let lives = 3;
    let launched = false;
    let isAiming = false;
    let aimX = 0;
    let aimY = 0;
    let selectedCharacter = "‚ö™";
    let unlockedCharacters = ["‚ö™"];
    let animationId = null;

    const allCharacters = ["‚ö™", "üîÆ", "üíé", "‚ú®", "üîÜ", "üåü", "üü°", "üßä"];

    function drawBall() {
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
      ctx.fillStyle = "#0ff";
      ctx.fillText(selectedCharacter, ball.x - 6, ball.y + 6);
      ctx.fill();
      ctx.closePath();
    }

    function drawPaddle() {
      ctx.fillStyle = "#0ff";
      ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
    }

    function drawBricks() {
      bricks.forEach(b => {
        if (!b.broken) {
          ctx.fillStyle = "#0ff";
          ctx.fillRect(b.x, b.y, b.width, b.height);
        }
      });
    }

    function drawAimArrow() {
      if (!launched && isAiming) {
        ctx.beginPath();
        ctx.moveTo(ball.x, ball.y);
        ctx.lineTo(aimX, aimY);
        ctx.strokeStyle = "#0ff";
        ctx.stroke();
        ctx.closePath();
      }
    }

    function createBricks() {
      bricks = [];
      const rowCount = 4 + level;
      const colCount = 7;
      const brickWidth = 60;
      const brickHeight = 20;
      const padding = 10;
      const offsetTop = 50;
      const offsetLeft = 30;

      for (let r = 0; r < rowCount; r++) {
        for (let c = 0; c < colCount; c++) {
          const x = c * (brickWidth + padding) + offsetLeft;
          const y = r * (brickHeight + padding) + offsetTop;
          bricks.push({ x, y, width: brickWidth, height: brickHeight, broken: false });
        }
      }
    }

function resetBall() {
      ball.dx = 0;
      ball.dy = 0;
      launched = false;
      isAiming = false;
      ball.x = paddle.x + paddle.width / 2;
      ball.y = paddle.y - ball.radius - 1;
    }

    function resetGame() {
      score = 0;
      level = 1;
      lives = 3;
      scoreEl.textContent = score;
      levelEl.textContent = level;
      livesEl.textContent = lives;
      createBricks();
      resetBall();
    }

    function update() {
      if (launched) {
        ball.x += ball.dx;
        ball.y += ball.dy;

        // Colis√£o com parede
        if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) ball.dx *= -1;
        if (ball.y - ball.radius < 0) ball.dy *= -1;

        // Colis√£o com paddle
        if (
          ball.x > paddle.x &&
          ball.x < paddle.x + paddle.width &&
          ball.y + ball.radius > paddle.y &&
          ball.y - ball.radius < paddle.y + paddle.height
        ) {
          ball.dy *= -1;
        }

        // Colis√£o com tijolos
        bricks.forEach(b => {
          if (!b.broken && ball.x > b.x && ball.x < b.x + b.width && ball.y > b.y && ball.y < b.y + b.height) {
            ball.dy *= -1;
            b.broken = true;
            score += 10;
            scoreEl.textContent = score;
          }
        });

        // Perdeu vida
        if (ball.y - ball.radius > canvas.height) {
          lives--;
          livesEl.textContent = lives;
          if (lives === 0) {
            showMenu();
          } else {
            resetBall();
          }
        }

        // Passou de fase
        if (bricks.every(b => b.broken)) {
          level++;
          levelEl.textContent = level;
          unlockCharacters(level);
          createBricks();
          resetBall();
        }
      }
    }

    function unlockCharacters(level) {
      if (level >= 2 && !unlockedCharacters.includes("üîÆ")) unlockedCharacters.push("üîÆ");
      if (level >= 3 && !unlockedCharacters.includes("üíé")) unlockedCharacters.push("üíé");
      if (level >= 4 && !unlockedCharacters.includes("‚ú®")) unlockedCharacters.push("‚ú®");
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawBricks();
      drawBall();
      drawPaddle();
      drawAimArrow();
      update();
      animationId = requestAnimationFrame(draw);
    }

    function showMenu() {
      if (animationId) {
        cancelAnimationFrame(animationId);
        animationId = null;
      }
      gameContainer.style.display = "none";
      characterMenu.style.display = "none";
      menu.style.display = "block";
    }

    function startGame() {
      resetGame();
      menu.style.display = "none";
      gameContainer.style.display = "flex";
      draw();
    }

    function showCharacterMenu() {
      menu.style.display = "none";
      characterMenu.style.display = "block";
      renderCharacters();
    }

    function renderCharacters() {
      characterList.innerHTML = "";
      allCharacters.forEach(char => {
        const div = document.createElement("div");
        div.textContent = char;
        div.className = "character " + (unlockedCharacters.includes(char) ? "unlocked" : "locked");
        if (unlockedCharacters.includes(char)) {
          div.addEventListener("click", () => {
            selectedCharacter = char;
            showMenu();
          });
        }
        characterList.appendChild(div);
      });
    }

    canvas.addEventListener("mousedown", e => {
      if (!launched) {
        isAiming = true;
        aimX = e.offsetX;
        aimY = e.offsetY;
      }
    });

    canvas.addEventListener("mousemove", e => {
      if (isAiming) {
        aimX = e.offsetX;
        aimY = e.offsetY;
      }
    });

    canvas.addEventListener("mouseup", () => {
      if (!launched && isAiming) {
        const angle = Math.atan2(ball.y - aimY, aimX - ball.x);
        ball.dx = Math.cos(angle) * 5;
        ball.dy = -Math.sin(angle) * 5;
        launched = true;
        isAiming = false;
      }
    });

    startBtn.addEventListener("click", startGame);
    characterBtn.addEventListener("click", showCharacterMenu);
    backBtn.addEventListener("click", showMenu);

    createBricks();
    showMenu();
  </script>
</body>
</html>