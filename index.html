<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Splash Crazy - Jogo da Bolinha Neon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #0ff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    #gameContainer, #characterSelector { display: none; flex-direction: column; align-items: center; }
    canvas { background-color: #222; border: 3px solid #0ff; display: block; margin: 10px 0; touch-action: none; }
    #menu button, #characterSelector button {
      margin: 8px;
      padding: 10px 20px;
      font-size: 1rem;
      background: #0ff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #menu, #characterSelector {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }
    .character {
      border: 2px solid #0ff;
      padding: 10px;
      border-radius: 10px;
      margin: 5px;
      width: 180px;
      text-align: center;
      background: #111;
      color: #0ff;
      cursor: pointer;
    }
    .locked {
      opacity: 0.5;
      pointer-events: none;
    }
    .character-color {
      width: 30px;
      height: 30px;
      margin: 5px auto;
      border-radius: 50%;
    }
  </style>
</head>
<body>
  <div id="menu">
    <h1>Splash Crazy - Jogo da Bolinha Neon</h1>
    <button id="startBtn">Iniciar Jogo</button>
    <button id="selectBtn">Selecionar Bolinha</button>
  </div>

  <div id="gameContainer">
    <canvas id="gameCanvas" width="360" height="480"></canvas>
    <div>
      <span>Pontuação: <span id="score">0</span></span> |
      <span>Vidas: <span id="lives">3</span></span> |
      <span>Fase: <span id="level">1</span></span>
    </div>
    <button id="backBtn">Voltar ao Menu</button>
  </div>

  <div id="characterSelector">
    <h2>Escolha sua Bolinha</h2>
    <div id="characterList"></div>
    <button id="backToMenuBtn">Voltar</button>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const scoreEl = document.getElementById("score");
    const livesEl = document.getElementById("lives");
    const levelEl = document.getElementById("level");
    const startBtn = document.getElementById("startBtn");
    const selectBtn = document.getElementById("selectBtn");
    const backBtn = document.getElementById("backBtn");
    const menu = document.getElementById("menu");
    const gameContainer = document.getElementById("gameContainer");
    const characterSelector = document.getElementById("characterSelector");
    const characterList = document.getElementById("characterList");
    const backToMenuBtn = document.getElementById("backToMenuBtn");

    let score = 0, lives = 3, level = 1, launched = false, isAiming = false;
    let selectedCharacter = 0;

    const characters = [
      { name: "Bolinha Padrão", color: "#0ff", unlocked: true, description: "Comece aqui!" },
      { name: "Bolinha de Cristal", color: "#ccf", unlocked: false, description: "Desbloqueia na fase 3" },
      { name: "Bolinha de Ouro", color: "#fc0", unlocked: false, description: "Desbloqueia com 500 pontos" },
      { name: "Bolinha Brilhante", color: "#f0f", unlocked: false, description: "Desbloqueia na fase 5" },
      { name: "Bolinha Piscando", color: "#fff", unlocked: false, description: "Desbloqueia com 1000 pontos" }
    ];

    const paddle = {
      width: 80,
      height: 10,
      x: canvas.width / 2 - 40,
      y: canvas.height - 30,
      speed: 6,
      dx: 0
    };

    const ball = {
      x: canvas.width / 2,
      y: paddle.y - 10,
      radius: 7,
      dx: 0,
      dy: 0
    };

    let bricks = [];
    const brickRowCount = 5;
    const brickColumnCount = 7;
    const brickWidth = 44;
    const brickHeight = 15;
    const brickPadding = 6;
    const brickOffsetTop = 30;
    const brickOffsetLeft = 10;

    function createBricks() {
      bricks = [];
      for (let r = 0; r < brickRowCount; r++) {
        bricks[r] = [];
        for (let c = 0; c < brickColumnCount; c++) {
          bricks[r][c] = { x: 0, y: 0, status: 1 };
        }
      }
    }

    function drawBricks() {
      for (let r = 0; r < brickRowCount; r++) {
        for (let c = 0; c < brickColumnCount; c++) {
          const b = bricks[r][c];
          if (b.status === 1) {
            const brickX = c * (brickWidth + brickPadding) + brickOffsetLeft;
            const brickY = r * (brickHeight + brickPadding) + brickOffsetTop;
            b.x = brickX;
            b.y = brickY;
            ctx.beginPath();
            ctx.rect(brickX, brickY, brickWidth, brickHeight);
            ctx.fillStyle = "#0ff";
            ctx.fill();
            ctx.closePath();
          }
        }
      }
    }

    function drawPaddle() {
      ctx.beginPath();
      ctx.rect(paddle.x, paddle.y, paddle.width, paddle.height);
      ctx.fillStyle = "#0ff";
      ctx.fill();
      ctx.closePath();
    }

    function drawBall() {
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
      ctx.fillStyle = characters[selectedCharacter].color;
      ctx.fill();
      ctx.closePath();
    }

    function drawAimArrow() {
      if (!launched && isAiming) {
        ctx.beginPath();
        ctx.moveTo(ball.x, ball.y);
        ctx.lineTo(ball.x + aim.dx * 15, ball.y + aim.dy * 15);
        ctx.strokeStyle = "#0ff";
        ctx.stroke();
        ctx.closePath();
      }
    }

    const aim = { dx: 0, dy: 0 };

    function update() {
      if (paddle.dx !== 0) {
        paddle.x += paddle.dx;
        if (paddle.x < 0) paddle.x = 0;
        if (paddle.x + paddle.width > canvas.width) paddle.x = canvas.width - paddle.width;
        if (!launched) ball.x = paddle.x + paddle.width / 2;
      }

      if (launched) {
        ball.x += ball.dx;
        ball.y += ball.dy;

        if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) {
          ball.dx *= -1;
        }
        if (ball.y - ball.radius < 0) {
          ball.dy *= -1;
        }
        if (ball.y + ball.radius > canvas.height) {
          lives--;
          livesEl.textContent = lives;
          if (lives <= 0) {
            alert("Fim de jogo!");
            showMenu();
          } else {
            resetBall();
          }
        }

        if (ball.x > paddle.x && ball.x < paddle.x + paddle.width &&
            ball.y + ball.radius > paddle.y && ball.y - ball.radius < paddle.y + paddle.height) {
          ball.dy *= -1;
        }

        for (let r = 0; r < brickRowCount; r++) {
          for (let c = 0; c < brickColumnCount; c++) {
            const b = bricks[r][c];
            if (b.status === 1) {
              if (ball.x > b.x && ball.x < b.x + brickWidth &&
                  ball.y > b.y && ball.y < b.y + brickHeight) {
                ball.dy *= -1;
                b.status = 0;
                score += 10;
                scoreEl.textContent = score;

                // Desbloqueios
                if (score >= 500) characters[2].unlocked = true;
                if (score >= 1000) characters[4].unlocked = true;

                if (bricks.every(row => row.every(b => b.status === 0))) {
                  level++;
                  levelEl.textContent = level;
                  characters[1].unlocked = level >= 3;
                  characters[3].unlocked = level >= 5;
                  createBricks();
                  resetBall();
                }
              }
            }
          }
        }
      }
    }

    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") paddle.dx = -paddle.speed;
      if (e.key === "ArrowRight") paddle.dx = paddle.speed;
    });

    document.addEventListener("keyup", (e) => {
      if (e.key === "ArrowLeft" || e.key === "ArrowRight") paddle.dx = 0;
    });

    canvas.addEventListener("mousedown", (e) => {
      if (!launched) {
        isAiming = true;
        const rect = canvas.getBoundingClientRect();
        const dx = e.clientX - rect.left - ball.x;
        const dy = e.clientY - rect.top - ball.y;
        const len = Math.sqrt(dx * dx + dy * dy);
        aim.dx = dx / len;
        aim.dy = dy / len;
      }
    });

    canvas.addEventListener("mouseup", () => {
      if (!launched && isAiming) {
        ball.dx = aim.dx * 4;
        ball.dy = aim.dy * 4;
        launched = true;
        isAiming = false;
      }
    });

    canvas.addEventListener("touchstart", (e) => {
      const touch = e.touches[0];
      const rect = canvas.getBoundingClientRect();
      const touchX = touch.clientX - rect.left;
      if (!launched) {
        isAiming = true;
        const dx = touchX - ball.x;
        const dy = (touch.clientY - rect.top) - ball.y;
        const len = Math.sqrt(dx * dx + dy * dy);
        aim.dx = dx / len;
        aim.dy = dy / len;
      }
    });

    canvas.addEventListener("touchend", () => {
      if (!launched && isAiming) {
        ball.dx = aim.dx * 4;
        ball.dy = aim.dy * 4;
        launched = true;
        isAiming = false;
      }
    });

    canvas.addEventListener("touchmove", (e) => {
      const touch = e.touches[0];
      const rect = canvas.getBoundingClientRect();
      const touchX = touch.clientX - rect.left;
      paddle.x = touchX - paddle.width / 2;
      if (!launched) {
        ball.x = paddle.x + paddle.width / 2;
      }
    });

    canvas.addEventListener("mousemove", (e) => {
      const rect = canvas.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      paddle.x = mouseX - paddle.width / 2;
      if (!launched) {
        ball.x = paddle.x + paddle.width / 2;
      }
    });

<script>
  let animationId = null;

  function resetBall() {
    ball.dx = 0;
    ball.dy = 0;
    launched = false;
    isAiming = false;
    ball.x = paddle.x + paddle.width / 2;
    ball.y = paddle.y - ball.radius - 1;
  }

  function resetGame() {
    score = 0;
    level = 1;
    lives = 3;
    scoreEl.textContent = score;
    livesEl.textContent = lives;
    levelEl.textContent = level;
    createBricks();
    resetBall();
  }

  function showMenu() {
    if (animationId) {
      cancelAnimationFrame(animationId);
      animationId = null;
    }
    gameContainer.style.display = "none";
    menu.style.display = "block";
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBricks();
    drawBall();
    drawPaddle();
    drawAimArrow();
    update();
    animationId = requestAnimationFrame(draw);
  }

  function startGame() {
    menu.style.display = "none";
    gameContainer.style.display = "flex";
    resetGame();
    draw();
  }

  backBtn.addEventListener("click", showMenu);
  startBtn.addEventListener("click", startGame);
  selectBtn.addEventListener("click", () => {
    menu.style.display = "none";
    characterSelector.style.display = "flex";
    renderCharacterList();
  });

  backToMenuBtn.addEventListener("click", () => {
    characterSelector.style.display = "none";
    menu.style.display = "block";
  });

  function renderCharacterList() {
    characterList.innerHTML = "";
    characters.forEach((character, index) => {
      const div = document.createElement("div");
      div.className = "character";
      if (!character.unlocked) div.classList.add("locked");
      div.innerHTML = `
        <div class="character-name">${character.name}</div>
        <div class="character-color" style="background:${character.color};"></div>
        <div class="character-description">${character.description}</div>
      `;
      if (character.unlocked) {
        div.addEventListener("click", () => {
          selectedCharacter = index;
          alert(\`Você selecionou: ${character.name}\`);
          characterSelector.style.display = "none";
          menu.style.display = "block";
        });
      }
      characterList.appendChild(div);
    });
  }

  // Inicialização
  createBricks();
  showMenu();
</script>
</body>
</html>