<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Splash Crazy - Jogo da Bolinha Neon</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #0ff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 20px;
    }
    #menu, #characterSelect, #gameArea {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    #menu.active, #characterSelect.active, #gameArea.active {
      display: flex;
    }
    canvas {
      border: 2px solid #0ff;
      background-color: #000;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      background: #0ff;
      color: #000;
      border: none;
      cursor: pointer;
      font-size: 16px;
      border-radius: 12px;
    }
    input, textarea {
      margin-top: 5px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #0ff;
      width: 100%;
      max-width: 300px;
    }
    label {
      margin-top: 10px;
      display: block;
    }
  </style>
</head>
<body>
  <div id="menu" class="active">
    <h1>Splash Crazy - Jogo da Bolinha Neon</h1>
    <button onclick="startCharacterSelect()">Selecionar Personagem</button>
    <button onclick="startGame()">Iniciar Jogo</button>

    <hr />

    <h2>Deixe seu comentário</h2>
    <form action="https://formsubmit.co/noahrosa8046@gmail.com" method="POST" target="_blank">
      <label for="name">Nome:</label>
      <input type="text" id="name" name="name" placeholder="Seu nome" required />
      <label for="message">Comentário / Sugestão:</label>
      <textarea id="message" name="message" placeholder="Escreva aqui..." required rows="4"></textarea>
      <input type="hidden" name="_captcha" value="false" />
      <button type="submit">Enviar</button>
    </form>

    <button id="backBtn" onclick="goToMenu()">Voltar ao Menu</button>
  </div>

  <div id="characterSelect">
    <h2>Escolha seu personagem</h2>
    <div id="characterOptions"></div>
    <button onclick="goToMenu()">Voltar</button>
  </div>

  <div id="gameArea">
    <canvas id="gameCanvas" width="800" height="640"></canvas>
  </div>

<script>
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  let paddle = { x: canvas.width / 2 - 40, y: canvas.height - 20, width: 80, height: 10 };
  let ball = { x: canvas.width / 2, y: canvas.height - 30, dx: 4, dy: -4, radius: 8 };
  let bricks = [];
  let score = 0, lives = 3, level = 1;
  let selectedCharacter = "neon";
  let animationId = null;
  let isDragging = false;

  const characters = [
    { id: "neon", name: "Neon (Inicial)", unlocked: true },
    { id: "ouro", name: "Bolinha de Ouro", unlockScore: 200 },
    { id: "cristal", name: "Bolinha de Cristal", unlockScore: 400 },
    { id: "brilhante", name: "Bolinha Brilhante", unlockScore: 600 },
    { id: "piscando", name: "Bolinha Piscando", unlockScore: 800 }
  ];

  function goToMenu() {
    stopGameLoop();
    document.getElementById("menu").classList.add("active");
    document.getElementById("characterSelect").classList.remove("active");
    document.getElementById("gameArea").classList.remove("active");
  }

  function startCharacterSelect() {
    document.getElementById("menu").classList.remove("active");
    document.getElementById("characterSelect").classList.add("active");
    renderCharacterOptions();
  }

  function renderCharacterOptions() {
    const container = document.getElementById("characterOptions");
    container.innerHTML = "";
    characters.forEach(char => {
      const unlocked = char.unlocked || score >= (char.unlockScore || 0);
      if (unlocked) char.unlocked = true;

      const btn = document.createElement("button");
      btn.textContent = unlocked ? char.name : `Bloqueado: ${char.unlockScore} pts`;
      btn.disabled = !unlocked;
      btn.onclick = () => {
        selectedCharacter = char.id;
        goToMenu();
      };
      container.appendChild(btn);
    });
  }

  function startGame() {
    resetGame();
    document.getElementById("menu").classList.remove("active");
    document.getElementById("gameArea").classList.add("active");
    gameLoop();
  }

  function resetGame() {
    stopGameLoop();
    paddle.x = canvas.width / 2 - 40;
    ball.x = canvas.width / 2;
    ball.y = canvas.height - 30;
    ball.dx = 4 * (Math.random() > 0.5 ? 1 : -1);
    ball.dy = -4;
    createBricks();
  }

  function stopGameLoop() {
    if (animationId) {
      cancelAnimationFrame(animationId);
      animationId = null;
    }
  }

  function createBricks() {
    bricks = [];
    const rowCount = 3 + level;
    const colCount = 5;
    for (let r = 0; r < rowCount; r++) {
      for (let c = 0; c < colCount; c++) {
        bricks.push({
          x: 80 + c * 120,
          y: 60 + r * 30,
          width: 100,
          height: 20,
          destroyed: false
        });
      }
    }
  }

  function drawBall() {
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
    ctx.fillStyle = selectedCharacter === "ouro" ? "gold" :
                    selectedCharacter === "cristal" ? "lightblue" :
                    selectedCharacter === "brilhante" ? "#fff" :
                    selectedCharacter === "piscando" ? (Math.random() > 0.5 ? "#0ff" : "#f0f") :
                    "#0ff";
    ctx.fill();
    ctx.closePath();
  }

  function drawPaddle() {
    ctx.fillStyle = "#0ff";
    ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
  }

  function drawBricks() {
    bricks.forEach(b => {
      if (!b.destroyed) {
        ctx.fillStyle = "#0ff";
        ctx.fillRect(b.x, b.y, b.width, b.height);
      }
    });
  }

  function drawScore() {
    ctx.font = "18px Arial";
    ctx.fillStyle = "#0ff";
    ctx.fillText("Pontos: " + score, 8, 20);
    ctx.fillText("Vidas: " + lives, canvas.width - 100, 20);
    ctx.fillText("Fase: " + level, canvas.width / 2 - 30, 20);
  }

  function updateBall() {
    ball.x += ball.dx;
    ball.y += ball.dy;

    // colisão parede
    if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) ball.dx *= -1;
    if (ball.y - ball.radius < 0) ball.dy *= -1;

    // colisão com paddle
    if (
      ball.y + ball.radius > paddle.y &&
      ball.x > paddle.x &&
      ball.x < paddle.x + paddle.width
    ) {
      ball.dy *= -1;
      ball.y = paddle.y - ball.radius;
    }

    // colisão com tijolos
    bricks.forEach(b => {
      if (!b.destroyed &&
        ball.x > b.x &&
        ball.x < b.x + b.width &&
        ball.y > b.y &&
        ball.y < b.y + b.height) {
        ball.dy *= -1;
        b.destroyed = true;
        score += 10;
      }
    });

    // perder vida
    if (ball.y + ball.radius > canvas.height) {
      lives--;
      if (lives === 0) {
        alert("Fim de Jogo!");
        goToMenu();
      } else {
        resetGame();
      }
    }

    // próxima fase
    if (bricks.every(b => b.destroyed)) {
      level++;
      resetGame();
    }
  }

  function gameLoop() {
    animationId = requestAnimationFrame(gameLoop);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBricks();
    drawBall();
    drawPaddle();
    drawScore();
    updateBall();
  }

  // Mouse e Touch
  canvas.addEventListener("mousemove", e => {
    const rect = canvas.getBoundingClientRect();
    paddle.x = e.clientX - rect.left - paddle.width / 2;
  });

  canvas.addEventListener("touchmove", e => {
    e.preventDefault();
    const touch = e.touches[0];
    const rect = canvas.getBoundingClientRect();
    paddle.x = touch.clientX - rect.left - paddle.width / 2;
  }, { passive: false });
</script>
</body>
</html>